# RAG-Assistant

RAG-ассистент с FAISS и кешированием ответов.

## Описание

Минимальный, но полностью рабочий пример ИИ-ассистента с технологией RAG (Retrieval-Augmented Generation), локальным векторным хранилищем FAISS и кешированием ответов.

### Как работает RAG

1. **Пользователь задает вопрос**
2. **Проверка кеша** - если ответ уже есть, возвращается мгновенно
3. **Поиск релевантных документов** - векторный поиск в FAISS
4. **Формирование контекста** - сборка найденных фрагментов
5. **Генерация ответа** - запрос к LLM (OpenAI) с контекстом
6. **Кеширование ответа** - сохранение для будущих запросов
7. **Возврат ответа пользователю**

## Особенности

- Локальное векторное хранилище FAISS (совместимо с Python 3.14+)
- OpenAI эмбеддинги для высокого качества поиска
- Семантический поиск по документам
- Кеширование ответов для экономии API-запросов
- Поддержка прокси API для OpenAI
- Два режима работы: интерактивный и демонстрационный

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/yourusername/rag-assistant.git
cd rag-assistant
```

### 2. Создание виртуального окружения

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/Mac
python3 -m venv venv
source venv/bin/activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Настройка

Скопируйте `env.example` в `.env` и добавьте ваш API ключ:

```bash
cp env.example .env
```

Отредактируйте `.env`:

```env
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://openai.api.proxyapi.ru/v1
TOP_K=3
```

Получить API ключ можно на [platform.openai.com](https://platform.openai.com/api-keys)

## Запуск

```bash
python main.py
```

При первом запуске программа:
- Создаст локальную базу данных FAISS
- Загрузит модель для создания эмбеддингов
- Добавит примеры документов в базу
- Предложит выбрать режим работы

### Режимы работы

**1. Интерактивный режим** (по умолчанию)
- Задавайте свои вопросы ассистенту
- Получайте ответы на основе базы знаний
- Команды: `exit`, `cache`, `clear_cache`, `stats`

**2. Демонстрационный режим**
- Автоматически выполняет заготовленные примеры
- Показывает работу RAG и кеша

## Структура проекта

```
.
├── main.py              # Точка входа
├── rag.py               # Логика RAG (поиск + генерация)
├── cache.py             # Кеширование ответов LLM
├── embeddings.py        # Работа с FAISS
├── requirements.txt     # Зависимости проекта
├── env.example          # Пример конфигурации
├── .gitignore           # Git ignore правила
├── TEST_REPORT.md       # Отчёт о тестировании
└── README.md            # Документация
```

## Конфигурация

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| OPENAI_API_KEY | API ключ OpenAI | - |
| OPENAI_BASE_URL | URL прокси API | https://openai.api.proxyapi.ru/v1 |
| TOP_K | Количество документов для поиска | 3 |

## Примеры вопросов

Система содержит знания о:
- Python и его особенностях
- Машинном обучении и RAG
- Векторных базах данных

Примеры вопросов:
- "Что такое Python?"
- "Расскажи про RAG"
- "Для чего нужны векторные базы данных?"
- "Какие есть типы машинного обучения?"

## Тестирование

Тесты включают:
- Базовый запуск и ответы на вопросы
- Тестирование кеширования
- Сравнение TOP_K=3 и TOP_K=7

Результаты тестирования: [TEST_REPORT.md](TEST_REPORT.md)

## Технические детали

### FAISS
- Локальное векторное хранилище
- Высокая скорость поиска
- Совместимость с Python 3.14+

### Эмбеддинги
- Модель: text-embedding-3-small (OpenAI)
- Размерность: 1536

### Кеш
- Формат: JSON
- Ключ: SHA-256 хеш запроса

## Лицензия

MIT License

## Автор

Создано в учебных целях.
